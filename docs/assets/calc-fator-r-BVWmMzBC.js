function u(t){if(t==null)return NaN;const n=String(t).trim().replace(/\s+/g,"");return parseFloat(n.replace(/\./g,"").replace(",","."))}function f(t){return new Intl.NumberFormat("pt-BR",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}function p(t,n,c=.28){const e=isFinite(t)&&t>0,a=isFinite(n)&&n>0;if(!e||!a){let o;return!e&&!a?o="Informe valores positivos para folha e receita (12 meses).":e?o="Informe a receita bruta dos últimos 12 meses.":o="Informe o total de folha dos últimos 12 meses.",{ok:!1,msg:o}}const r=t/n,l=r>=c?"Anexo III":"Anexo V";return{ok:!0,fator:r,anexo:l}}function x(){const t=document.querySelector('[data-calc="fator-r"]');if(!t)return;const n=t.querySelector('[name="folha12"]'),c=t.querySelector('[name="receita12"]'),e=t.querySelector("[data-result]"),a=t.querySelector('[data-kpi="fator"]'),r=t.querySelector('[data-kpi="anexo"]');if(!n||!c||!e)return;const l=i=>{e.classList.toggle("is-anexo-iii",i==="Anexo III"),e.classList.toggle("is-anexo-v",i==="Anexo V")},o=()=>{const i=u(n.value),m=u(c.value),s=p(i,m);if(!s.ok){e.textContent=s.msg,l(null),a&&(a.textContent="0%"),r&&(r.textContent="—");return}e.textContent=`Fator R: ${f(s.fator)}. Sua empresa se enquadra no ${s.anexo}.`,l(s.anexo),a&&(a.textContent=f(s.fator)),r&&(r.textContent=s.anexo)};o(),t.addEventListener("input",o,{passive:!0}),t.addEventListener("change",o),t.addEventListener("submit",i=>i.preventDefault())}export{x as initFatorRCalculator};
