/* MOBILE NAV — acordeão elegante, sem !important */
@layer components {
  @media (max-width: 767px) {

    /* menu principal abre por classe */
    #menu-principal.c-nav {
      display: none;
    }

    #menu-principal.c-nav.is-open {
      display: block;
      position: absolute;
      inset-block-start: 100%;
      inset-inline: 0;
      padding: var(--spacing-md);
      background: var(--color-neutral-000);
      border-top: 1px solid var(--color-neutral-200);
      box-shadow: var(--shadow-sm);
      overscroll-behavior: contain;
      max-height: calc(100dvh - var(--header-h, 64px));
      overflow: auto;
      padding-bottom: calc(var(--spacing-md) + env(safe-area-inset-bottom));
    }

    .c-nav__list {
      display: grid;
      gap: .25rem;
      text-align: start;
    }

    /* botão do dropdown ocupa a linha toda */
    .c-nav__item--has-dropdown>button.c-nav__link {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      padding: .875rem 1rem;
      border-radius: var(--border-radius);
      line-height: 1.2;
    }

    .c-nav__arrow-icon {
      transition: transform .18s ease;
    }

    .c-nav__item--has-dropdown.is-open .c-nav__arrow-icon {
      transform: rotate(180deg);
    }

    /* submenus como acordeão */
    .c-nav__item--has-dropdown>.c-nav__submenu {
      display: none;
    }

    .c-nav__item--has-dropdown.is-open>.c-nav__submenu {
      display: grid;
      gap: .25rem;
      margin-top: .5rem;
      padding: .5rem;
      background: var(--color-neutral-000);
      border: 1px solid var(--color-neutral-200);
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
      animation: nav-pop .16s ease;
    }

    .c-nav__submenu-link {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: .75rem;
      padding: .75rem 1rem;
      border-radius: 10px;
      text-decoration: none;
      color: var(--color-neutral-800);
      transition: background .15s ease, color .15s ease, transform .15s ease;
      min-block-size: 44px;
    }

    .c-nav__submenu-link::after {
      content: "›";
      opacity: .55;
      transition: transform .15s ease, opacity .15s ease;
    }

    .c-nav__submenu-link:hover,
    .c-nav__submenu-link:focus-visible {
      background: color-mix(in srgb, var(--color-primary-500) 12%, transparent);
      color: var(--color-primary-700);
      outline: none;
    }

    .c-nav__submenu-link:hover::after {
      transform: translateX(2px);
      opacity: .85;
    }

    @keyframes nav-pop {
      from {
        opacity: 0;
        transform: translateY(6px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  }
}

/* Dark mode opcional */
@layer components {
  @media (max-width: 767px) {
    :root[data-theme="dark"] #menu-principal.c-nav.is-open {
      background: #0b1220;
      border-top-color: #1f2937;
    }

    :root[data-theme="dark"] .c-nav__item--has-dropdown.is-open>.c-nav__submenu {
      background: #0b1220;
      border-color: #1f2937;
      box-shadow: 0 10px 24px rgba(0, 0, 0, .35);
    }

    :root[data-theme="dark"] .c-nav__submenu-link:hover,
    :root[data-theme="dark"] .c-nav__submenu-link:focus-visible {
      background: color-mix(in srgb, #3b82f6 16%, transparent);
      color: #e5e7eb;
    }
  }
}

/* Reduz movimento */
@layer utilities {
  @media (prefers-reduced-motion: reduce) {
    * {
      animation: none !important;
      transition: none !important;
    }
  }
}
