function v(){const o=typeof HTMLDialogElement=="function";o||document.documentElement.classList.add("no-dialog"),document.querySelectorAll("[data-help-open]").forEach(c=>{const m=c.getAttribute("data-help-open"),e=document.querySelector(m);if(!e)return;let l=null,s=()=>{};const r=()=>{const t=e.querySelectorAll('button, [href], input, select, textarea, details, [tabindex]:not([tabindex="-1"])');return Array.from(t).filter(n=>!n.hasAttribute("disabled")&&!n.getAttribute("aria-hidden"))},a=t=>{if(t.key!=="Tab")return;const n=r();if(n.length===0)return;const u=n[0],f=n[n.length-1];t.shiftKey&&document.activeElement===u?(t.preventDefault(),f.focus()):!t.shiftKey&&document.activeElement===f&&(t.preventDefault(),u.focus())},d=t=>{t.key==="Escape"&&i()},p=()=>{l=document.activeElement,o?e.showModal():(e.removeAttribute("hidden"),e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.addEventListener("keydown",a),document.addEventListener("keydown",d),s=()=>{e.removeEventListener("keydown",a),document.removeEventListener("keydown",d),s=()=>{}}),(e.querySelector(".c-help-dialog__close")||r()[0]||e).focus()},i=()=>{o?e.close():(s(),e.setAttribute("hidden","")),l&&typeof l.focus=="function"&&l.focus()};c.addEventListener("click",p),o&&e.addEventListener("cancel",t=>{t.preventDefault(),i()}),e.addEventListener("click",t=>{t.target===e&&i()}),e.querySelectorAll("[data-help-close]").forEach(t=>{t.addEventListener("click",i)})})}export{v as initHelpDialogs};
